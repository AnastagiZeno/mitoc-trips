{% load signup_tags %}
<table class="footable">
    <thead>
        <tr>
            <th>Name</th>  {# Link out #}
            <th data-type="numeric" class="nowrap">Date</th>
            <th data-hide="phone,tablet" data-sort-ignore="true">Description</th>
            <th data-type="numeric" class="nowrap" data-hide="phone">Signups</th>
            <th data-type="numeric" class="nowrap">Spaces</th>
            <th data-hide="phone,tablet">Leaders</th>
        </tr>
    </thead>

    <tbody>
    {% for trip in trip_list %}

    <tr>
        <td><a href="{% url 'view_trip' trip.id %}">{{ trip.name|truncatechars:45 }}</a></td>
        <td class="nowrap" data-value="{{ trip.trip_date|date:'U' }}">
            {% if trip.in_past %}
                {{ trip.trip_date|date:"Y-m-d" }}
            {% else %}
                {{ trip.trip_date|date:"D" }}
            {% endif %}
        </td>
        <td><strong>{{ trip.difficulty_rating }}</strong> {{ trip.description|truncatechars:50 }}</td>
        {% with signups_on_trip=trip.signups_on_trip|default_if_none:0 %}
        <td data-value="{{ trip.num_signups }}"> {{ trip.num_signups }} / {{ trip.maximum_participants }}</td>
        <td> {{ trip.maximum_participants|subtract:signups_on_trip }} </td>
        {% endwith %}
        <td> {{ trip.leaders.all|join:", " }}</td>
    </tr>

    {% endfor %}
    </tbody>
</table>
