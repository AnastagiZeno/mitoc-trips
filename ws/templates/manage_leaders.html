{% extends "messages_page.html" %}

{% block content %}
{{ block.super }}

{% if not formset %}
<p> No leaders found! Try <a href="{% url 'add_leader' %}">adding leaders</a>. </p>
{% else %}
<form action="" method="post">
    {% csrf_token %}
    <table class="footable">
        {{ formset.management_form }}
        <thead>
            <tr>
                <th>Name</th>
                <th data-hide="phone,tablet">Email</th>
                <th data-sort-ignore="true">Rating</th>
                <th data-sort-ignore="true" data-hide="phone,tablet">Notes</th>
                <th data-hide="phone" data-sort-ignore="true">Delete</th>
                {% if formset.is_bound and not formset.is_valid %}
                <th class="error" data-sort-ignore="true">Errors</th>
                {% endif %}
            </tr>
        </thead>

        <tbody>
        {% for form in formset %}
            {{ form.id }} {# hidden id #}
            <tr>
                <td> <a href="{% url 'view_participant' form.instance.participant.id %}">{{ form.instance.participant.name }}</a></td>
                <td> <a href="mailto:{{ form.instance.participant.email }}">{{ form.instance.participant.email }}</a></td>
                <td> {{ form.rating }}</td>
                <td> {{ form.notes }}</td>
                <td> {{ form.DELETE }}</td>
                {% if formset.errors %}
                <td> {{ form.errors }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <input type="submit" value="Submit" />
</form>
{% endif %}
{% endblock content %}
